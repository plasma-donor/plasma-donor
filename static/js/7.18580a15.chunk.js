(this.webpackJsonpplasma=this.webpackJsonpplasma||[]).push([[7],{122:function(t,e,n){"use strict";n.r(e);var a=n(45),s=n(1),r=n(88),c=n.n(r),i=n(0),o=n(79),d=n(125),l=n(82),u=n(89),j=n(14),p=n(87),b=n(24),f=n(7),h=[];e.default=function(){var t=Object(i.useState)(h),e=Object(a.a)(t,2),n=e[0],r=e[1],O=Object(i.useState)(!1),m=Object(a.a)(O,2),x=m[0],v=m[1],g=Object(i.useState)(""),D=Object(a.a)(g,2),I=D[0],y=D[1],C=Object(f.f)(),N=Object(i.useContext)(b.a).loggedIn;Object(i.useEffect)((function(){N||C.push("/login")}),[N,C]),Object(i.useEffect)((function(){v(!0),c.a.post("".concat(p.a.listDonors)).then((function(t){t&&t.data&&200===t.data.statusCode&&(v(!1),"string"===typeof t.data.data?y(t.data.data):r(t.data.data))})).catch((function(t){v(!1),y("Donors: "+j.a.msgError)}))}),[]);var q=function(t){if(t)return t.map((function(t,e){return t.selected=!1,Object(s.jsx)("option",{value:t.donorId,children:t.name},t.donorId)}))};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h4",{className:"text-center mar-top-bot-2rem",children:j.a.msgDonations}),Object(s.jsx)("hr",{}),x?Object(s.jsx)("div",{className:"text-center",children:Object(s.jsx)(o.a,{animation:"border",role:"status"})}):I?Object(s.jsx)(d.a,{variant:"primary",children:I}):null,Object(s.jsx)("br",{}),Object(s.jsxs)(u.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"#"}),Object(s.jsx)("th",{children:"Name"}),Object(s.jsx)("th",{children:"Donation Date"}),Object(s.jsx)("th",{children:"Matching Donars List"}),Object(s.jsx)("th",{style:{textAlign:"center"},children:"Actions"})]})}),Object(s.jsx)("tbody",{children:function(){if(n)return n.map((function(t,e){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e+1}),Object(s.jsx)("td",{children:t.patientName}),Object(s.jsx)("td",{children:Object(s.jsx)(l.a.Control,{type:"date",placeholder:"Enter Admission Date",size:"sm",value:t.donationDate,onChange:function(e){return a=t.patientId,s=e.target.value,void(n.find((function(t){return t.patientId==a})).donationDate=s);var a,s}})}),Object(s.jsx)("td",{children:Object(s.jsxs)(l.a.Control,{as:"select",onChange:function(e){return a=t.patientId,s=e.target.value,void n.find((function(t){return t.patientId==a})).donorsList.forEach((function(t){t.donorId==s&&(t.selected=!0)}));var a,s},children:[Object(s.jsx)("option",{value:"",children:"Select Donor"}),q(t.donorsList)]})}),Object(s.jsx)("td",{style:{textAlign:"center"},children:Object(s.jsx)("span",{className:"link",onClick:function(){return function(t){var e=n.find((function(e){return e.patientId==t})),a=e.donorsList.find((function(t){return 1==t.selected}));a&&(v(!0),c.a.post("".concat(p.a.closeDonationRequest),{patientId:t,donorId:a.donorId,donationDate:e.donationDate}).then((function(t){t&&t.data&&200===t.data.statusCode&&(v(!1),"string"===typeof t.data.data?y(t.data.data):y("Donation request closed successfully"))})).catch((function(t){v(!1),y(j.a.msgError)})))}(t.patientId)},children:"Close Request"})})]},t.patientId)}))}()})]})]})}},87:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a="https://plasma-donor.herokuapp.com/",s={upload:"".concat(a,"api/patient/upload"),addPatient:"".concat(a,"api/patient/create"),editPatient:"".concat(a,"api/patient/findById"),updatePatient:"".concat(a,"api/patient/update"),listPatients:"".concat(a,"api/patient/findAll"),requestPlasma:"".concat(a,"api/plasma/request"),listDonors:"".concat(a,"api/plasma/request/close/getdata"),closeDonationRequest:"".concat(a,"api/plasma/request/close/submit"),listDonorsList:"".concat(a,"api/patient/findAllDonors")}},89:function(t,e,n){"use strict";var a=n(2),s=n(3),r=n(4),c=n.n(r),i=n(0),o=n.n(i),d=n(5),l=o.a.forwardRef((function(t,e){var n=t.bsPrefix,r=t.className,i=t.striped,l=t.bordered,u=t.borderless,j=t.hover,p=t.size,b=t.variant,f=t.responsive,h=Object(s.a)(t,["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"]),O=Object(d.a)(n,"table"),m=c()(r,O,b&&O+"-"+b,p&&O+"-"+p,i&&O+"-striped",l&&O+"-bordered",u&&O+"-borderless",j&&O+"-hover"),x=o.a.createElement("table",Object(a.a)({},h,{className:m,ref:e}));if(f){var v=O+"-responsive";return"string"===typeof f&&(v=v+"-"+f),o.a.createElement("div",{className:v},x)}return x}));e.a=l}}]);
//# sourceMappingURL=7.18580a15.chunk.js.map